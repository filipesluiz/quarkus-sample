# USAGE

1 - Rodar o script `run-db2-docker.bat` para criar o container do DB2 
> **_NOTA:_** Após criar o `CONTAINER` é necessário reiniciar o computador!

2 - Para logar no container:  
```script
docker exec -ti mydb2 bash -c "su - db2inst1"
```
3 - Execute o comando abaixo para entrar no modo de execução de script:
```script
db2 
```
4 - Conecte no banco de dados para criar a tabela e sp utilizando o script da próxima seção. 
```script
connect to testdb
```
5 - [Opcional] Se necessário, use o comando abaixo para verificar a porta utilizada: 
```script
db2 get dbm cfg|grep SVCENAME
cat /etc/services | grep db2c_db2inst1
```
6 - [Opcional] Para listar o Database:
```script
list db directory
```
7 - [Opcional] Para listar as tabelas:
```script
list tables
```



# TABLE
## PRODUCT
```sql
create table PRODUCT
(
    ID INT GENERATED BY DEFAULT AS IDENTITY NOT NULL, 
    NAME VARCHAR(255), 
    DESCRIPTION VARCHAR(255), 
    PRIMARY KEY (ID)
);
```

# STORED PROCEDURE
## SP_CONSULTA_PRODUTO - (ACCESSED TABLES: [PRODUCT])
```sql
CREATE PROCEDURE SP_FIND_PRODUCT(IN P_ID INTEGER, IN P_NAME VARCHAR(255)) 
RESULT SETS 1 SP1: 
BEGIN 
    DECLARE C1 CURSOR WITH RETURN FOR 
        SELECT ID, NAME, DESCRIPTION FROM PRODUCT 
        WHERE (P_ID IS NULL OR ID = P_ID) 
        AND (P_NAME IS NULL OR NAME = P_NAME);
    OPEN C1;
END SP1
```

## SP_ALTERA_PRODUTO - (ACCESSED TABLES: [PRODUCT])
```sql
CREATE PROCEDURE SP_UPDATE_PRODUCT(IN P_ID INTEGER, IN P_NAME VARCHAR(255), P_DESCRIPTION VARCHAR(255)) 
BEGIN 
    UPDATE PRODUCT
    SET NAME = P_NAME, 
        DESCRIPTION = P_DESCRIPTION
    WHERE ID = P_ID
END
```

## SP_ALTERA_PRODUTO - (ACCESSED TABLES: [PRODUCT])
```sql
CREATE PROCEDURE SP_INSERT_PRODUCT(IN P_NAME VARCHAR(255), P_DESCRIPTION VARCHAR(255), OUT P_ID INTEGER) 
BEGIN 
    INSERT INTO PRODUCT(NAME, DESCRIPTION)
    VALUES(P_NAME, P_DESCRIPTION);

    SET P_ID = IDENTITY_VAL_LOCAL();
END 
```

## SP_ALTERA_PRODUTO - (ACCESSED TABLES: [PRODUCT])
```sql
CREATE PROCEDURE SP_DELETE_PRODUCT(IN P_ID INTEGER) 
BEGIN 
    DELETE FROM PRODUCT
    WHERE ID = P_ID;
END
```